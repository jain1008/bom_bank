if("/"===window.location.pathname){var clientIpAddr="",requestBody="",pageDef="",userType="",cuuid="",environment=getEnvironmentConfig(),peContentData="",globalBannerResponse="",global_liveRampResponse="",global_idlValue="",liveRampResp="",OS_ReqParams={},rfTimeOut=1700,blueKaiTimeOut=600,liveRampTimeOut=700,liveRampResp_Time="",formType="";sessionStorage.removeItem("status");var signoffCookie=getCookie("signoff"),makeBannerCall=getCookie("makeBannerCall");//(async call)
function setFormType(){var e=getCookie("CBOLECM");formType=null==e||null==e||""==e?"Non Cookied Username Password":"Y"==e.split("-")[0]||"Y"==e.split("-")[20]?"Cookied Username Password Citigold":"Cookied Username Password"}function getEnvironmentConfig(){//NOTE: May need to change pecontenturl to https://" +  window.location.hostname + "/gcgapi/uat3/public/v1/staticcms/USGCB/en_US/appid/cbol_pe_offers.json for domain change to avoid CORS
var e=window.location.hostname;return-1!=e.indexOf("localhost")||-1!=e.indexOf("dit")?{homepageConfig:{apiServerUrl:"https://sit.api.citi.com/gcgapi/dev3/api/v1/marketing/offers/banner",clientID:"2a8c33c0-b3bd-4ca1-a7f5-7235094845db",contentURL:"https://localhost:7878",peContentUrl:"https://xlg-fdn-p-psg-dev3.apps-gt1-dev.nam.nsroot.net/staticcms/USGCB/en_US/appid/cbol_pe_offers.json",contentClientID:"09c18460-392e-4ba9-9850-42e043114b31",appserviceHostName:"http://localhost:6002"}}:-1!=e.indexOf("webqa1")||-1!=e.indexOf("webqa01")||-1!=e.indexOf("webqa2")||-1!=e.indexOf("webqa02")?{homepageConfig:{apiServerUrl:"https://"+window.location.hostname+"/gcgapi/sb/api/v1/marketing/offers/banner",clientID:"525a1c00-1067-4de5-a54e-22d85901379c",contentURL:"https://"+window.location.hostname,peContentUrl:"https://"+window.location.hostname+"/gcgapi/sb/public/v1/staticcms/USGCB/en_US/appid/cbol_pe_offers.json",contentClientID:"edafa16a-aa4f-4d4b-acdb-a25203af1480",appserviceHostName:"https://webqa1.online.citi.com"}}:-1!=e.indexOf("uat.citi.com")?{homepageConfig:{apiServerUrl:"https://uat.citi.com/gcgapi/uat3/api/v1/marketing/offers/banner",clientID:"91b3da7a-9318-422c-bac8-f7f82d529c4d",contentURL:"https://uat.citi.com",peContentUrl:"https://uat.citi.com/gcgapi/uat3/public/v1/staticcms/USGCB/en_US/appid/cbol_pe_offers.json",contentClientID:"3ea31584-77fb-4b6d-bec2-65a45cae1664",appserviceHostName:"https://uat.online.citi.com"}}:-1!=e.indexOf("uat1")||-1!=e.indexOf("uat01")?{homepageConfig:{
// Adding check "cms-test" cookie for BAU CMS maintenance testing  
apiServerUrl:"true"===getCookie("cms-test")?"https://sd-9ea5-6df7.nam.nsroot.net:9009/v1/marketing/offers/banner":"https://"+window.location.hostname+"/gcgapi/uat1/api/v1/marketing/offers/banner",clientID:"ee00de8c-7e4a-4ab4-8b63-3a08b03c6d01",contentURL:"https://"+window.location.hostname,peContentUrl:"https://"+window.location.hostname+"/gcgapi/uat1/public/v1/staticcms/USGCB/en_US/appid/cbol_pe_offers.json",contentClientID:"1c95feec-b029-4112-8394-033ba19cb7de",appserviceHostName:"https://uat1.online.citi.com"}}:-1!=e.indexOf("uat2")||-1!=e.indexOf("uat02")?{homepageConfig:{apiServerUrl:"https://"+window.location.hostname+"/gcgapi/uat2/api/v1/marketing/offers/banner",clientID:"88f34131-e5fd-4bf0-a5df-09d26ee5a175",contentURL:"https://"+window.location.hostname,peContentUrl:"https://"+window.location.hostname+"/gcgapi/uat2/public/v1/staticcms/USGCB/en_US/appid/cbol_pe_offers.json",contentClientID:"3ea31584-77fb-4b6d-bec2-65a45cae1664",appserviceHostName:"https://uat2.online.citi.com"}}:-1!=e.indexOf("uat3")||-1!=e.indexOf("uat03")?{homepageConfig:{apiServerUrl:"https://"+window.location.hostname+"/gcgapi/uat3/api/v1/marketing/offers/banner",clientID:"91b3da7a-9318-422c-bac8-f7f82d529c4d",contentURL:"https://"+window.location.hostname,peContentUrl:"https://"+window.location.hostname+"/gcgapi/uat3/public/v1/staticcms/USGCB/en_US/appid/cbol_pe_offers.json",contentClientID:"6a755087-ac37-4847-99a2-110c8da4f6b6",appserviceHostName:"https://uat3.online.citi.com"}}:-1!=e.indexOf("sit7")?{homepageConfig:{apiServerUrl:"https://sit7.online.citi.com/gcgapi/uat3/api/v1/marketing/offers/banner",clientID:"91b3da7a-9318-422c-bac8-f7f82d529c4d",contentURL:"https://sit7.online.citi.com",peContentUrl:"https://sit7.online.citi.com/gcgapi/uat3/public/v1/staticcms/USGCB/en_US/appid/cbol_pe_offers.json",contentClientID:"6a755087-ac37-4847-99a2-110c8da4f6b6",appserviceHostName:"https://sit7.online.citi.com"}}:-1!=e.indexOf("sit6")?{homepageConfig:{apiServerUrl:"https://sit.api.citi.com/gcgapi/sit1/api/v1/marketing/offers/banner",clientID:"9d2b103a-052a-4707-b021-6c0d1a46ffeb",contentURL:"https://sit6.online.citi.com",peContentUrl:"https://sit6.online.citi.com/gcgapi/uat1/public/v1/staticcms/USGCB/en_US/appid/cbol_pe_offers.json",contentClientID:"1c95feec-b029-4112-8394-033ba19cb7de",appserviceHostName:"https://sit6.online.citi.com"}}:-1!=e.indexOf("citi.com")?{homepageConfig:{apiServerUrl:"https://"+window.location.hostname+"/gcgapi/prod/api/v1/marketing/offers/banner",clientID:"e83e6374-92f0-472c-8a6b-2ded64acc51c",contentURL:"https://online.citi.com",peContentUrl:"https://"+window.location.hostname+"/gcgapi/prod/public/v1/staticcms/USGCB/en_US/appid/cbol_pe_offers.json",contentClientID:"4a51fb19-a1a7-4247-bc7e-18aa56dd1c40",appserviceHostName:"https://online.citi.com"}}:void 0}
//This is pixel Call
function setLiveRampPixel(){new Promise((e=>{var t=document.createElement("IMG"),i="https://idsync.rlcdn.com/463166.gif?partner_uid";
// TODO set userType in cookie and create clearUserExp flag.
i=i+"="+(
//call getcuuid function to get from cookie
cuuid=getCUUID()),t.setAttribute("src",i),t.addEventListener("load",(function(){e(t)})),
// Handle call error
t.addEventListener("error",(function(){e(null)})),t.addEventListener("abort",(function(){e(null)})),
// Handle call timeout
setTimeout((function(){e(null)}),liveRampTimeOut)})).then((e=>{e||console.log("Pixel load timed out. Triggering the idl api call"),fireLiveRampCall()})).catch((e=>{console.log("Pixel failed. Triggering the idl api call ",e),fireLiveRampCall()}))}function getCUUID(){//split cookie, using ; as delimiter
for(var e="CUUID=",t=decodeURIComponent(document.cookie).split(";"),i=0//get cookiename CUUID
;i<t.length;i++){for(//go through cookies find CUUID cookie name
var n=t[i];" "==n.charAt(0);)n=n.substring(1);if(0==n.indexOf(e))if(null!=n.substring(e.length)&&null!=n.substring(e.length)&&""!=n.substring(e.length))return n.substring(e.length);//return CUUID value
}
//Create new CUUID value since none exists
const o=new Date;o.setTime(o.getTime()+31536e6);const a=newCookie();//uuid.v4();
//TODO add "secure" attribute
return document.cookie="CUUID="+a+"; expires="+o.toUTCString()+"; path=/;domain=.citi.com",a;
//return "cuuid";
}function newCookie(){options={};var e=rng();//define rng
// Per 4.4, set bits for version and `clock_seq_hi_and_reserved`
return e[6]=15&e[6]|64,e[8]=63&e[8]|128,bytesToUuid(e)}function rng(){var e="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(e){
// WHATWG crypto RNG - http://wiki.whatwg.org/wiki/Crypto
var t=new Uint8Array(16);// eslint-disable-line no-undef
return e(t),t}for(
// Math.random()-based (RNG)
// If all else fails, use Math.random().  It's fast, but is of unspecified
// quality.
var i,n=new Array(16),o=0;o<16;o++)0==(3&o)&&(i=4294967296*Math.random()),n[o]=i>>>((3&o)<<3)&255;return n}function bytesToUuid(e){for(var t=[],i=0;i<256;++i)t[i]=(i+256).toString(16).substr(1);i=0;var n=t;
// join used to fix memory issue caused by concatenation: https://bugs.chromium.org/p/v8/issues/detail?id=3175#c4
return[n[e[i++]],n[e[i++]],n[e[i++]],n[e[i++]],"-",n[e[i++]],n[e[i++]],"-",n[e[i++]],n[e[i++]],"-",n[e[i++]],n[e[i++]],"-",n[e[i++]],n[e[i++]],n[e[i++]],n[e[i++]],n[e[i++]],n[e[i++]]].join("")}
//_dl call on pre-page load
function taggingDLData(){var e={action_type:"page view",app_hierarchy:"public|marketing|home|citi",lead_type:"citi.com|home"};e.form_type=formType,e.test_id="183_3_0 citi.com Homepage - Page View",window.taggingDataLayer.applicationData("nonicms_content",e),
// added settimeout to delay in setting the sessionstorage item so that, in angular code we can check for this itemm and fire banner_displayed
setTimeout((()=>{sessionStorage.setItem("isPageViewDone","done")}),500)}
//This is Liveramp call
function fireLiveRampCall(){taggingDLData(),liveRampUrl="https://api.rlcdn.com/api/identity?pid=1&rt=idl";var e=new XMLHttpRequest;e.withCredentials=!0,e.onreadystatechange=function(){4==e.readyState&&200==e.status&&callback(e.responseText)},e.open("GET",liveRampUrl,!0),-1!=liveRampTimeOut&&(e.timeout=liveRampTimeOut);var t=(new Date).getTime();e.onload=function(){if(e.readyState===e.DONE&&200===e.status){var i=(new Date).getTime()-t;liveRampResp_Time=i,liveRampResp=e.response,OS_ReqParams.metaData.identityLink=JSON.parse(liveRampResp).idl,null!=liveRampResp&&""!=liveRampResp&&null!=liveRampResp&&(global_liveRampResponse=liveRampResp,validateLiveRampResponse(JSON.stringify(global_liveRampResponse),global_liveRampResponse))}},e.ontimeout=function(e){return-1},e.onerror=function(e){return-1},e.send(null),requestBody=prepareOSReq(),setTimeout((function(){("true"!=signoffCookie||"Y"!=makeBannerCall)&&(""!=signoffCookie&&null!=signoffCookie||"Y"!=makeBannerCall&&"N"!=makeBannerCall)&&""!=makeBannerCall||getPEOffers()}),700)}function validateLiveRampResponse(e,t){var i="",n={blackListKeywords:["script","embed","object"],whiteListVariables:["idl"]};
// Validate string against blacklist keywords of whole liveramp response
for(let t=0;t<n.blackListKeywords.length;t++)-1!=e.indexOf(n.blackListKeywords[t]);
// Validate json against whitelist words to find if key present
for(let e=0;e<n.whiteListVariables.length;e++)!!t[n.whiteListVariables[e]]&&(i=t[n.whiteListVariables[e]]);global_idlValue=i}
//This is Blue kai call
function fireBlueKaiCall(){decodeURIComponent(document.cookie).split(";");//get cookiename BKDMP
if(""==getCookie("BKDMP")){
//Set BKDMP cookie since none is present
var e=new XMLHttpRequest;
//var res = httpCall("GET", blueKaiUrl, true, blueKaiTimeOut);
e.withCredentials=!0,e.onreadystatechange=function(){4==e.readyState&&200==e.status&&(callback(e.responseText),bluekaiCallback(JSON.parse(e.response)))},e.open("GET","https://stags.bluekai.com/site/19469?ret=json",!0),-1!=blueKaiTimeOut&&(e.timeout=blueKaiTimeOut),e.onload=function(){if(e.readyState===e.DONE&&200===e.status)return e.response},e.ontimeout=function(e){return-1},e.onerror=function(e){return-1},e.send(null)}}function bluekaiCallback(e){e?parseBlueKaiResponse(e):document.cookie="BKDMP=;  path=/; domain=.citi.com"}function parseBlueKaiResponse(e){var t="";if(Array.prototype.reduce&&Array.prototype.map){var i=[];e.campaigns.reduce((function(e,t){i.push(t.campaign+":"+t.categories.map((function(e){return e.categoryID})).join("|"))}),!0),t=i.join("-")}
// Store parsed response into BKDMP cookie
else for(let i=0;i<e.campaigns.length;i++){for(var n=e.campaigns[i],o=parseInt(n.campaign),a="",s=0;s<n.categories.length;s++){var r=parseInt(n.categories[s].categoryID);s!=n.categories.length-1?a=a+r+"|":a+=r}t=i!=e.campaigns.length-1?t+o+":"+a+"-":t+o+":"+a}setCookie("BKDMP",t,0,".citi.com")}function setCookie(e,t,i,n){var o=new Date;o.setTime(o.getTime()+24*i*60*60*1e3);var a="expires="+o.toUTCString();document.cookie="experience"==e||"BKDMP"==e?e+"="+t+";domain="+n+";path=/;secure":e+"="+t+";"+a+";domain="+n+";path=/;secure"}function getDeviceType(){if(this.window){let e=this.window.innerWidth;return e>983?"L":e>599?"M":"S"}}function getXpuid(){let e=getCookie("RFXPUID");return void 0!==e&&null!=e?e:""}
//This function can be used to get the usertype
function checkUserType(){let e=getCookie("CBOLECM");
// const isBlue = this._ecmCookieService.getValueByIndex(19);
return""===e||null==e?(pageDef="jUSCBOL_Loginpage_Uncookied",userType="Uncookied"):"Y"==e.split("-")[0]||"Y"==e.split("-")[20]?(pageDef="jUSCBOL_Loginpage_Citigold",userType="Gold"):(pageDef="jUSCBOL_Loginpage_Cookied",userType="Blue"),userType}function getImmediateReferrer(){let e;if(void 0!==this.document.referrer&&null!=typeof this.document.referrer&&""!=this.document.referrer){
// let element = this.document.createElement('a');  // creating anchor element
// element.href = this.document.referrer;  // Assign href attribute of element with document.referrer value
// immediateReferrerValue = element.protocol + "//" + element.hostname + element.pathname;  // Assign immediateReferrerValue with document.referrers' protocol, hostname and pathname
let t=this.document.referrer;e=t.indexOf("?")>0?t.substring(0,t.indexOf("?")):t}return e;// immediateReferrerValue holds origin value of document.referrer when valid and empty string when document.referrer is invalid
}function prepareOSReq(){//Called in client side
checkUserType();
//let clientIpAddr = this._hpService.clientIpAddr; //Getting ip address
//console.log("clientIpAddr", clientIpAddr);
/** New repeat user logic
         * If the _s_pers_ cookie is present, and the vn parameter =1 or non numeric value then set ret to  “New”
         * else if vn>1 then set ret to “Repeat”
        */
var e=(new Date).getTime()-18e5,t=getCookie("s_pers")?decodeURIComponent(getCookie("s_pers")):"",i="NEW",n=1;if(t=t?decodeURIComponent(t):t){
// If Cookie is not empty 
var o=t?t.split("&vn="):[],a=o.length>0?o[1].split("|"):[],s=t.split("s_nr="),r=s.length>0?s[1].split("-"):[];if(a.length>0&&NaN!=parseInt(a[0])){var c=parseInt(r[0])-e;i=NaN!=parseInt(a[0])&&parseInt(a[0])>1||NaN!=parseInt(a[0])&&1==parseInt(a[0])&&c<0?"REPEAT":i,NaN!=parseInt(a[0])&&parseInt(a[0])>1?n=parseInt(a[0]):NaN!=parseInt(a[0])&&1==parseInt(a[0])&&c<0&&(n=parseInt(a[0])+1)}}
/** new logic end */let p,l,u=window.innerHeight+"",d=window.innerWidth+"",g=null!=getCookie("CBOLECM")&&null!=getCookie("CBOLECM")?getCookie("CBOLECM"):"",m=null!=getCookie("CB_AOSDMPRF")&&null!=getCookie("CB_AOSDMPRF")?getCookie("CB_AOSDMPRF"):"";if(p=void 0!==m&&null!=m?""==m?"Y":"N":"Y",null!=getCookie("CB_popsplit")&&null!=getCookie("CB_popsplit")&&""!=getCookie("CB_popsplit"))l=getCookie("CB_popsplit");else{let e=Math.floor(100*Math.random());const t=new Date;t.setTime(t.getTime()+31536e6),document.cookie="CB_popsplit="+e+";expires="+t.toUTCString()+";path=/;domain=.citi.com",l=getCookie("CB_popsplit")}let f,C=void 0!==navigator.javaEnabled()&&null!=typeof navigator.javaEnabled()&&navigator.javaEnabled(),h=void 0!==window.screen.availWidth&&null!=typeof window.screen.availWidth&&void 0!==this.window.screen.availHeight&&null!=typeof this.window.screen.availHeight?this.window.screen.availWidth+"x"+this.window.screen.availHeight:"",v=getImmediateReferrer(),b=null!=getCookie("axDP")?getCookie("axDP"):"",k=null!=getCookie("axDS")?getCookie("axDS"):"";// Returns Boolean value to check java enabled on browser
//let cuuid = (null != getCookie("CUUID")) ? (getCookie("CUUID")) : "";// axDP Cookie
if(null!=cuuid&&""!=cuuid&&null!=cuuid||(cuuid=getCUUID()),null==v||null==v||""==v)f="DIRECT",v="";else{let e=v.split("//");e&&(f="|"+e[0]+"//"+e[1].split("/")[0])}
/** ccid_ccsid  if exists the set value to requestbody else set empty */var w="",R="",U=getCookie("ccid_ccsid");if(U){var S=(U=decodeURI(U)).split("|");S&&S.length>0&&(w=S[1]?S[1]:w,R=S[0]?S[0]:R)}
//         let OS_ReqParams = {
return OS_ReqParams={metaData:{blueKaiCategory:"",// Blue Kai Attributes
browserHeight:u,// Inner browser height
browserWidth:d,// inner browser width
deviceSize:getDeviceType(),//Device breakpoint size
enteryPointFlag:"N",//(typeof entry != "undefined" && entry) ? entry : "", // Entry Point
ipAddress:clientIpAddr,// clientIpAddress
pageId:"citi-com-homepage-ang",// Source page id
pageVersion:"HP2",// pagevesrion need to sent to zeta
popDigit:l,// Population Digit : Effective August 2018 release - send CB_popsplit cookie value else send parsed popDigit value from modelData cookie
returningUserFlag:i,// Return User Indicator
source:"cb",// Source Citi bank
userId:cuuid,// Global Unique Id - CUUID
ecmCookie:g,// Get ECM cookie
visiterNumber:n,// Visitor Number
javaEnabledFlag:C,// flag to check java enabled status
screenResolution:h,// screen Resolution
sourceUrl:v,// immediate referrer URL
identityLink:"",// idl value fetched from Live Ramp response
pricingRegion:getCookie("PricingRegion")?getCookie("PricingRegion"):"",// pricing region cookie
governingState:getCookie("GoverningState")?getCookie("GoverningState"):""},rocketFuel:{xpUserId:getXpuid()},acxiom:{acxiomCookie:decodeURIComponent(m),//Getting Acxiom Cookie
contextPageId:this.pageDef,// Unique page definition
experiencePopulation:"PRD",// If aug2018FeaturesSwicth is TRUE, Hard coding the attrValue to "PRD" in order to send PRD to Acxiom and RF as part of US # 808013, Feature - Pop Digit Restart on Citi.com - August 2018 else vice versa
sourcePageId:"citi-com-homepage",// Source page id
subChannelId:f,// Sub-Channel ID
axdpCookie:b,// acxiom DP cookie
axdsCookie:k// Acxiom DS cookie
},customerIdDetails:[{customerIdentifier:w,customerIdType:"CCSID"},{customerIdentifier:R,customerIdType:"CCID"}]}}
//To fetch cookie value by name
function getCookie(e){for(var t=e+"=",i=document.cookie.split(";"),n=0;n<i.length;n++){for(var o=i[n];" "==o.charAt(0);)o=o.substring(1);if(0==o.indexOf(t))return o.substring(t.length,o.length)}return""}function cookieStuff(){checkUserType();let e=getCookie("experience");null==e||null==e||""==e?null!=getCookie("CBOLECM")&&null!=getCookie("CBOLECM")&&""!=getCookie("CBOLECM")?"Gold"!=userType&&"Blue"!=userType||(setCookie("CB_AOSDMPRF","",0,".citi.com"),setCookie("experience",userType,null,".citi.com")):setCookie("experience","Uncookied",null,".citi.com"):null!=getCookie("CBOLECM")&&null!=getCookie("CBOLECM")&&""!=getCookie("CBOLECM")?
// let userType = this._rfRequestService.userType;
userType!=e&&(setCookie("CB_AOSDMPRF","",0,".citi.com"),//Deleting
setCookie("experience",userType,null,".citi.com")):setCookie("experience","Uncookied",null,".citi.com")}function getPEOffers(){var e=window.environment.homepageConfig.apiServerUrl,t=JSON.stringify(requestBody),i=new XMLHttpRequest;//'https://sit.api.citi.com/gcgapi/dev2/api/v1/marketing/offers/banner';      
return i.onreadystatechange=function(){4==i.readyState&&i.status},i.open("POST",e,!0),// Makes the http get call true for asynchronous
i.timeout=rfTimeOut,i.setRequestHeader("Content-Type","application/json"),i.setRequestHeader("client_id",environment.homepageConfig.clientID),i.onload=function(){//request finished
if(i.readyState===i.DONE)if(this.offerOrchHttpCode=i.status,200===i.status&&i.response){data=JSON.parse(i.response);let t=!!data.hasOwnProperty("contentDomainResponseStatus");var e={offerOrchHttpCode:this.offerOrchHttpCode,offerOrchResponse:data,isApiMerged:t};let n=JSON.stringify(e);globalBannerResponse=n,
//sessionStorage.setItem('rf_placements', rfRes);
//update session storage status to complete
sessionStorage.setItem("status","complete")}else
//Update sessionstorage status to error
sessionStorage.setItem("status","error")},i.ontimeout=function(e){//request timedout
//Update sessionstorage status to error
sessionStorage.setItem("status","error")},i.onerror=function(e){//failing in both local scenarios
//Update sessionstorage status to error
sessionStorage.setItem("status","error")},i.send(t),i.response}function callback(e){}"true"==signoffCookie&&"N"==makeBannerCall&&sessionStorage.setItem("status","error"),sessionStorage.setItem("isPageViewDone","notDone"),setFormType(),cookieStuff(),setLiveRampPixel(),//adds pixel call to index.html and gets called async to below calls
fireBlueKaiCall()}